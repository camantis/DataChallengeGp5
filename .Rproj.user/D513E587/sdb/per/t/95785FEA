{
    "collab_server" : "",
    "contents" : "Sfacts = read.csv(\"county_facts.csv\", sep=\",\", header=TRUE)\n\nEresults = read.csv(\"US_County_Level_Presidential_Results_12-16.csv\", sep=\",\", header=TRUE)\n\n#Subset Key for variables of interest\n# Trump voters were economically better off - Income\n# Registered voters with a college degree favored Clinton - Education\n# Less educated voters favored trump - Education \n# Trump voters were more likely to be white - Race\n# Hispanics/African Americans were more likely to vote for Clinton - Race\n# Suburban White Women can't stand Clinton - DesperateHouseWives\n# Married White Women favored clinton - DesperateHouseWives\n# Geographic regions: Northeast - CT, ME, MA, NH, RI, VT, NJ, NY, PA; \n# Midwest - IL, IN, MI, OH, WI, IA, KS, MN, MO, NE, ND, SD\n# South - DE, FL, GA, MD, NC, SC, VI, DC, WV, AL, KN, MS, TN, AR, LA, OK, TX; \n# West - AZ, CO, ID, MO, NV, NM, UT, WY, AK, CA, HI, OR, WA\n\n\n#1. Income (e.g. Trump voters were economically better off)\nIncome = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\",\"INC110213\",\n                                      \"PVY020213\")] #Creating a subset of the data we'll use for 'Income.' Considers  median household income (INC110213), and persons below the poverty level (PVY020213) for all states and all counties. \n\ntapply(Income$PVY020213,Income$state_abbreviation, mean) #avg poverty levels for each state\ntapply(Income$INC110213,Income$state_abbreviation,mean) #avg median income levels for each state\n#Next step: Correlate these two factors to states where Trump won vs. lost. High enough resolution to draw conclusion? Or do we need to study this on a county-scale...\n\n\n#Theory Check: We want to come up with a way to characterize the Economic profile of each area_name/county_name. Why not look at other variables for income? Alternative code:\n\n\nIncome2 = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\", \"INC110213\",\"INC910213\",\"HSG445213\",\"HSG096213\", \"HSG495213\",\"HSD310213\",\"HholdIncomePerPerson\",\"PVY020213\")]\n#Added these variables:\n#INC910213: Per capita money income in the past 12 months\n#HSG445213: Homeownership rate\n#HSG096213: Housing units in multi-unit structures, percent, 2009-2013\n#HSG495213: Median value of owner-occupied housing units\n#HSD310213: Persons per household (see http://www.oecd.org/statistics/OECD-ICW-Framework-Chapter2.pdf for theory behind)\n\n#Assumptions: \n#1) We are using housing and income as proxies for \"economically better off\"\n\n#New variable created:\nHholdIncomePerPerson=Sfacts$INC110213/Sfacts$HSD310213\n\n### 2. Education (e.g. \"Registered voters with a college degree favored Clinton)\nEducation = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\",\"EDU635213\", \"EDU685213\")]\n\n#EDU635213: High school graduate or higher\n#EDU685213: Bachelor's degree or higher\n#Theory check: Looks good.\n\n### 3. Race (e.g. \"Trump voters were more likely to be white\")\nRace = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\",\n                                    \"RHI125214\",\"RHI225214\",\"RHI325214\",\"RHI425214\",\"RHI525214\",\"RHI625214\",\"RHI725214\",\"RHI825214\")]\n\n#Possibly add these variables:\n#POP645213: Foreign-born persons\n#POP815213: Language other than English spoken at home\n#SBO315207: Black-owned firms\n#SBO115207: American Indian and Alaska Native-owned firms\n#SBO215207: Asian-owned firms\n#SBO515207: Native Hawaiian and other Pacific Islander owned firms\n#SBO415207: Hispanic-owned firms\n\n##Or, create a variable for each race\n#Trump voters were more likely to be white - Race\nWhite = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\", \"RHI125214\",\"RHI825214\",\"WhiteFirms\")]\n#Add to this the number of white firms: \nWhiteFirms=Sfacts$SBO001207-c(Sfacts$SBO315207|Sfacts$SBO115207|Sfacts$SBO215207|Sfacts$SBO515207|Sfacts$SBO415207)\n\n\n\n#Hispanics/African Americans were more likely to vote for Clinton:\nHisAfrican=Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\", \"RHI225214\",\"RHI725214\",\"SBO315207\",\"SBO415207\")]\n\n#Suburban White Women can't stand Clinton\nDesperateHouseWives = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\",\"SEX255214\")]  \n\n#Theory check: How can we include the 'surburban' component? \nDesperateHouseWivesSuburb = Sfacts[,names(Sfacts) %in% c(\"fips\",\"area_name\",\"state_abbreviation\",\"SEX255214\",\"HSG096213\",\"LND110210\",\"POP060210\")] \n\n#These two questions might be really difficult to answer with the info we have. \n# As far as I can tell, no info on marriage percentages, and surburban could be teased out but it isn't clear...\n\nNE =Sfacts[Sfacts$state_abbreviation %in% c(\"ME\",\"CT\",\"MA\",\"NH\",\"RI\",\"VT\",\"NJ\",\"NY\",\"PA\"),]\nNEResults =Eresults[Eresults$state_abbr %in% c(\"ME\",\"CT\",\"MA\",\"NH\",\"RI\",\"VT\",\"NJ\",\"NY\",\"PA\"), c(\"FIPS\",\"county_name\",\"state_abbr\",\"votes_dem_2016\",\"votes_gop_2016\",\"total_votes_2016\",\"per_dem_2016\",\"per_gop_2016\")]\ndroplevels(NE$area_name)\ndroplevels(NE$state_abbreviation)\ndroplevels(NEResults$state_abbr)\n\ncolnames(NEResults) = c(\"fips\",\"county\",\"state\",\"demvote\",\"gopvote\",\"totalvote\",\"%dem2016\",\"%gop2016\")\n\nNETotal = merge(NE,NEResults, by = \"fips\")\n\nNETotal=cbind(NETotal,trumpvictory=0) #creates a new column to determine whether Trump won or lost each county\nNETotal$trumpvictory[NETotal$gopvote>NETotal$demvote]=1 # if column value = 1, trump won the county, gopvotes>demvotes\n\nMW = Sfacts[Sfacts$state_abbreviation %in% c(\"IL\",\"IN\",\"MI\",\"OH\",\"WI\",\"IA\",\"KS\",\"MN\",\"MO\",\"NE\",\"ND\",\"SD\"),] \nMWResults = Eresults[Eresults$state_abbr %in% c(\"IL\",\"IN\",\"MI\",\"OH\",\"WI\",\"IA\",\"KS\",\"MN\",\"MO\",\"NE\",\"ND\",\"SD\"),c(\"FIPS\",\"county_name\",\"state_abbr\",\"votes_dem_2016\",\"votes_gop_2016\",\"total_votes_2016\",\"per_dem_2016\",\"per_gop_2016\")]    \n\ncolnames(MWResults) = c(\"fips\",\"county\",\"state\",\"demvote\",\"gopvote\",\"totalvote\",\"%dem2016\",\"%gop2016\")\nMWTotal = merge(MW,MWResults, by = \"fips\")\n\nMWTotal= cbind(MWTotal,trumpvictory=0) #creates a new column to determine whether Trump won or lost each county\nMWTotal$trumpvictory[NETotal$gopvote>NETotal$demvote]=1  # if column value = 1, trump won the county, gopvotes>demvotes\n\ndroplevels(MW$area_name)\ndroplevels(MW$state_abbreviation)\ndroplevels(MWResults$state_abbr)\n\nSO = Sfacts[Sfacts$state_abbreviation %in% c(\"DE\",\"FL\",\"GA\",\"MD\",\"NC\",\"SC\",\"VA\",\"DC\",\"WV\",\"AL\",\n                                             \"KY\",\"MS\",\"TN\",\"AR\",\"LA\",\"OK\",\"TX\"),]\nSOResults = Eresults[Eresults$state_abbr %in% c(\"DE\",\"FL\",\"GA\",\"MD\",\"NC\",\"SC\",\"VA\",\"DC\",\"WV\",\"AL\",\n                                                \"KY\",\"MS\",\"TN\",\"AR\",\"LA\",\"OK\",\"TX\"),c(\"FIPS\",\"county_name\",\"state_abbr\",\"votes_dem_2016\",\"votes_gop_2016\",\"total_votes_2016\",\"per_dem_2016\",\"per_gop_2016\")]\ndroplevels(SO$area_name)\ndroplevels(SO$state_abbreviation)\ndroplevels(SOResults$state_abbr)\n\nWE = Sfacts[Sfacts$state_abbreviation %in% c(\"AZ\",\"CO\",\"ID\",\"MT\",\"NV\",\"NM\",\"UT\",\"WY\",\"AK\",\"CA\",\"HI\",\"OR\",\"WA\"),]\nWEResults = Eresults[Eresults$state_abbr %in% c(\"AZ\",\"CO\",\"ID\",\"MT\",\"NV\",\"NM\",\"UT\",\"WY\",\"AK\",\"CA\",\"HI\",\"OR\",\"WA\"),c(\"FIPS\",\"county_name\",\"state_abbr\",\"votes_dem_2016\",\"votes_gop_2016\",\"total_votes_2016\",\"per_dem_2016\",\"per_gop_2016\")]\ndroplevels(WE$area_name)\ndroplevels(WE$state_abbreviation)\ndroplevels(WEResults$state_abbr)\n",
    "created" : 1486433143299.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "303508963",
    "id" : "95785FEA",
    "lastKnownWriteTime" : 1486434519,
    "last_content_update" : 1486434519975,
    "path" : "~/GitHub/DataChallengeGp5/DataChallenge1_NM.R",
    "project_path" : "DataChallenge1_NM.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}